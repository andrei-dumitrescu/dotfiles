#!/usr/bin/env sh

export CORE_HOME="$(dirname "$0")"
export CORE_LIBS="$CORE_HOME/libs"
export CORE_SCRIPTS="$CORE_HOME/scripts"
export CORE_TMP="$CORE_HOME/.tmp"

##
## Main
##

mkdir -p "$CORE_TMP"

# Source all libs in $CORE_LIBS
find "$CORE_LIBS" -type f | while IFS= read -r lib_file; do 
  . "$lib_file"
done

# Expose all dirs in $CORE_SCRIPTS to PATH
add_to_path "$CORE_SCRIPTS"

if [ "$HMVC_DEBUG" = true ]; then
  lib_files="$(find "$CORE_LIBS" -type f)"
  script_files="$(find "$CORE_SCRIPTS" -type f)"

  echo " $(underline "$(echo "$script_files" | wc -l) scripts") added to \$PATH"
  echo " $(underline "$(echo "$lib_files" | wc -l) libs") available under \$CORE_LIBS"
fi

