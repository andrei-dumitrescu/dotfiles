#!/usr/bin/env dash

UI_HOME="$(dirname "$0")"
UI_CONFIG="$UI_HOME/common"

LOG_NAMESPACE=" ui"
LOG_LEVEL=info

if [ -f "$UI_HOME/.env" ]; then
  . "$UI_HOME/.env"
fi

# ╭───┤ Expose scripts and libs
# ╰─

scripts_home="$UI_HOME/scripts"
export PATH="$scripts_home:$PATH"
fancy-log info -v path "$scripts_home" "Scripts exposed in \$PATH"

# ╭───┤ Link user configs 
# ╰─

while IFS="" read -r dir; do
  fake="$HOME/.config/$dir"
  real="$UI_CONFIG/$dir"
  ensure_symlink "$real" "$fake"
done << EOF
fontconfig
dunst
gtk-3.0
terminal-colors.d
EOF

ensure_symlink \
  "$UI_CONFIG/applications" \
  "$HOME/.local/share/applications"

ensure_symlink \
  "$UI_CONFIG/mimeapps.list" \
  "$HOME/.config/mimeapps.list"
